<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Visual indicator component | Target Indicators Documentation </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Visual indicator component | Target Indicators Documentation ">
    
    
      <link rel="shortcut icon" href="../../images/target_indicators_light_icon.png">
      <link rel="stylesheet" href="../../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../../styles/docfx.css">
      <link rel="stylesheet" href="../../styles/main.css">
      <meta property="docfx:navrel" content="../../toc.html">
      <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../images/target_indicators_light_icon.png" alt="Target Indicators">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="target-indicators-visual-indicator-component">
<h1 id="visual-indicator-component">Visual indicator component</h1>

<p>The visual indicator component is instantiated by the <a class="xref" href="visual-indicator-manager-component.html">VisualIndicatorManager</a> and controls each instance of a visual indicator prefab.</p>
<p><img src="../../images/visual-indicator-component.png" alt="An image of the visual indicator component."></p>
<h2 id="serializedfields-and-properties">SerializedFields and properties</h2>
<p>The following sections describes each references and settings of the component:</p>
<h3 id="core-indicator-content">Core Indicator content</h3>
<p>This is the root content that will be visible in the UI. Any imagery or text that is part of the core visual indicator should be parented to this transform.</p>
<h3 id="rotation-content">Rotation content</h3>
<p>This is the root content for image or text that will be rotated to point at the target the visual indicator is tracking. Any arrows or other imagery should be parented to this transform.</p>
<h3 id="core-indicator-visibility">Core Indicator visibility</h3>
<p>This determines how the indicator content will be visibile for a given state. This property does not affect the rotation content visibility. Refer to <a href="#indicator-visibility">Indicator visibility</a> to learn more about the options.</p>
<h3 id="rotation-content-visibility">Rotation content visibility</h3>
<p>This determines how the indicator's rotation content will be visible for a given state. This property does not affect the indicator visibility.  Refer to <a href="#indicator-visibility">Indicator visibility</a> to learn more about the options.</p>
<h2 id="indicator-visibility">Indicator visibility</h2>
<p>There are four types of indicator visibility that determines how visual indicator's content and their rotation content will be visible for any given state:</p>
<ol>
<li><p><strong>Never</strong></p>
<p>The content is never visible. This is typically only useful for rotation content where you don't want to show an arrow or any additional content that rotates to point at a target.</p>
</li>
<li><p><strong>Always</strong></p>
<p>The content is always visible.</p>
</li>
<li><p><strong>Outside boundary</strong></p>
<p>The content is only visible when the target is outside the boundary. This is typically used for the rotation content when you want an arrow to point at the target when it is outside the boundary.</p>
</li>
<li><p><strong>Inside boundary</strong></p>
<p>The content is only visible when the taret is inside the boundary. This is typically used for compass tape visual indicators where you only want the indicator visible when inside the bounds of the compass tape.</p>
</li>
</ol>
<h2 id="set-up-a-prefab">Set up a prefab</h2>
<p>The visual indicator prefabs provided in in <code>Assets/Target Indicators/Samples/Core Assets/Prefabs</code> is a good reference for building your own indicators. Create a prefab variant to use it as a template or make a new one from scratch.</p>
<h3 id="visual-indicator">Visual indicator</h3>
<p>The following image labels the key components of a visual indicator.</p>
<p><img src="../../images/visual-indicator-prefab.png" alt="An image of the visual indicator prefab."></p>
<ol type="A">
    <li>The core visual indicator content that is parented to the <b>Core Content</b> in the hiearchy.</li>
    <li>The visual indicator rotation content that is parented to the <b>Rotation Content</b> in the hiearchy.</li>
    <li>The <code>VisualIndicator</code> component and it's assigned references and settings.</li>
</ol>
<h3 id="compass-tape-visual-indicator">Compass tape visual indicator</h3>
<p>The <code>CompassTapeVisualIndicator</code> inherits from the base <code>VisualIndicator</code>. Like the base visual indicator, the compass tape visual indicator has the same configuration. The reason for a special <code>CompassTapeVisualIndicator</code> component is to handle the unique <a class="xref" href="../user_guide/target-indicator.html#interpret-the-screen-pose">interpreting of screen pose</a> values for compass tape target indicators.</p>
<p><img src="../../images/compass-tape-visual-indicator-prefab.png" alt="An image of the compass tape visual indicator prefab."></p>
<ol type="A">
    <li>The core visual indicator content that is parented to the <b>Core Content</b> in the hiearchy.</li>
    <li>The <code>CompassTapeVisualIndicator</code> component and its assigned references and settings. Typically the <code>RotationContentVisibility</code> is unused for compass tapes and set to <code>Never</code>.</li>
</ol>
<h2 id="compass-tape-boundary-check">Compass tape boundary check</h2>
<p>Due to the special nature of compass tape target indicators, you are responsible for checking if the indicator is outside of the compass tape boundary. The provided samples handles this in <code>CompassTapeVisualIndicator.UpdateVisualIndicator(Pose, bool)</code>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Refer to <a class="xref" href="../user_guide/target-indicator.html#compass-tape-boundary-type">Compass tape boundary type</a> to remind yourself how compass tapes work.</p>
</div>
<p>To calculate if the target indicator screen position is outside the boundary of the visible tape, use the following steps:</p>
<ol>
<li><p><strong>Calculate the full tape to visible tape ratio</strong></p>
<p>Calculate the ratio between the length of the full tape and the length of the visible tape by dividing the length of the UI element for the full tape by the length of the UI element for the visible tape. For example, if the full tape length is 1000 pixels long and the visible tape is 500 pixels long, the ratio would be <code>1000 รท 500 = 2</code> meaning the full tape length is twice the length of the visible tape.</p>
</li>
<li><p><strong>Calculate the target position on the full tape</strong></p>
<p>Remember that the target indicator manager returns a normalized value between 0 and 1 representing the target's cardinal direction relative to the user's forward direction. Take the <code>screenPose.position.x</code> received from the target indicator manager and multiply it with the full tape to visible tape ratio from the previous step. Finally multiply the product by the length of the visible tape.</p>
<p>For example, if the target indicator manager returns <code>0.25</code> for the X position of the target and the visible tape length is 500 pixels long as described in the previous step, the position on the full tape would be <code>0.25 * 2 * 500 = 250</code>.</p>
</li>
<li><p><strong>Calculate the distance from the position on the full tape to the middle of the full tape</strong></p>
<p>Take the result from step <strong>2</strong> and subtract half of the full tape length. <code>250 - (1000 * 0.5) = -250</code></p>
</li>
<li><p><strong>Calculate the position on the visible tape</strong></p>
<p>Add half of the visible tape to the result from step <strong>3</strong>. <code>(500 * 0.5) + (-250) = 0</code></p>
</li>
<li><p><strong>Check if the position is outside the boundary</strong></p>
<p>If the result from step 5 is less than 0 or greater than the length of the visible tape then we know it is outside of the boundary. In our example the result is 0 indicating it's at the very begininning position on the visible tape.</p>
</li>
</ol>
<p>Refer to the following code example to understand how these steps are implemented:</p>
<pre><code class="lang-cs" name="CompassTapeBoundaryCheck">float _fullTapeToVisibleTapeRatio = 2f;
float _visibleTapeLength = 500f;

public bool IsScreenPointOutsideBoundary(Pose screenPose)
{
    screenPose.position.x %= 1f;

    var fullTapeLength = _fullTapeToVisibleTapeRatio * _visibleTapeLength;
    var positionOnFullTape = screenPose.position.x * fullTapeLength;
    var middleOfFullTape = (_fullTapeToVisibleTapeRatio * _visibleTapeLength) * 0.5f;
    var middleToPositionOnFullTape = positionOnFullTape - middleOfFullTape;
    var middleOfVisibleTape = _visibleTapeLength * 0.5f;
    var pointOnVisibleTape = middleOfVisibleTape + middleToPositionOnFullTape;

    return pointOnVisibleTape &lt; 0 || pointOnVisibleTape &gt; _visibleTapeLength;
}
</code></pre>
</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
